#24
=
24번 문제를 들어가보면  
client ip 와 agent 값이 출력되어 있는것이 보인다.

![](https://postfiles.pstatic.net/MjAxOTExMjJfOTQg/MDAxNTc0NDAyMzc1NDA2.DNiIm3W25poOLT8LXQsSxls952e8RXBaIclE0zsUzJIg.2QH7B5pJ325AOYkNWqGgyYXmWQlRUCDE_4cXOblVCt4g.JPEG.rlaeoghks823/K-009.jpg?type=w773)

그리고 Wrong IP! 라고 출력이 되어있는데 아마도 이 문제는 IP값을 바꿔줘야하는 문제로 보인다.

페이지 소스를 확인해보면

```
<?php
  extract($_SERVER);
  extract($_COOKIE);
  $ip = $REMOTE_ADDR;
  $agent = $HTTP_USER_AGENT;
  if($REMOTE_ADDR){
    $ip = htmlspecialchars($REMOTE_ADDR);
    $ip = str_replace("..",".",$ip);
    $ip = str_replace("12","",$ip);
    $ip = str_replace("7.","",$ip);
    $ip = str_replace("0.","",$ip);
  }
  if($HTTP_USER_AGENT){
    $agent=htmlspecialchars($HTTP_USER_AGENT);
  }
  echo "<table border=1><tr><td>client ip</td><td>{$ip}</td></tr><tr><td>agent</td><td>{$agent}</td></tr></table>";
  if($ip=="127.0.0.1"){
    solve(24);
    exit();
  }
  else{
    echo "<hr><center>Wrong IP!</center>";
  }
?>
```
`$REMOTE_ADDR`를 `ip`에 저장하고  
이 `ip`값이 `127.0.0.1`이 되면 문제가 해결되는 것으로 보인다.

`extract($_COOKIE);`를 통해 쿠키내용을 불러오므로  
쿠키에 `REMOTE_ADDR`라는 이름의 쿠키가 들어있으면 이 값이 `ip`값으로 설정이 될 것이다.

따라서 크롬의 확장프로그램을 이용하여 `REMOTE_ADDR`라는 이름의 쿠키를 생성해주고 이 안에 127.0.0.1을 입력해준다.    
`str_replace`를 우회하기 위해 127.0.0.1을 10.270...00...00...1으로 입력해주면 결과는 127.0.0.1이 될 것이다.

## 참고

+ $REMOTE_ADDR : 사용자가 현재 페이지를 보고 있는 시스템의 IP 주소
+ $HTTP_USER_AGENT : 사용자의 웹접속환경 정보를 담고 있는 PHP전역변수
+ ​extract()함수는 배열 속의 키값을 변수화 시켜주는 함수이다.
