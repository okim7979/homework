#39
=
![](https://postfiles.pstatic.net/MjAxOTExMjJfMzQg/MDAxNTc0NDA0MzgwOTA4.uQrU55yDfcJ8Df3VEc6UCzeDjID7uP0h3tdWIjaMDmcg.rsRFcFXa-orMhn7FKo7r-TDlewKdEdEn6lxq33emKZEg.JPEG.rlaeoghks823/K-014.jpg?type=w773)

페이지 소스를 살펴보았다.

```
<?php
  include "../../config.php";
  if($_GET['view_source']) view_source();
?><html>
<head>
<title>Chellenge 39</title>
</head>
<body>
<?php
  $db = dbconnect();
  if($_POST['id']){
    $_POST['id'] = str_replace("\\","",$_POST['id']);
    $_POST['id'] = str_replace("'","''",$_POST['id']);
    $_POST['id'] = substr($_POST['id'],0,15);
    $result = mysqli_fetch_array(mysqli_query($db,"select 1 from member where length(id)<14 and id='{$_POST['id']}"));
    if($result[0] == 1){
      solve(39);
    }
  }
?>
<form method=post action=index.php>
<input type=text name=id maxlength=15 size=30>
<input type=submit>
</form>
<a href=?view_source=1>view-source</a>
</body>
</html>

```

입력된 값을 `substr`로 자르고 저장한 후 result값이 있으면 문제가 해결되는 방식이다.  
`mysqli_fetch_array`를 살펴보면 id='{$_POST['id']}에서 '가 없음을 확인 할 수 있었다.  

입력값으로 '가 들어오면 ''로 바꾸지만 이것을 우회하기위해 15째 자리에 '를 넣으면  
그 뒤에 ' 가짤려서 '하나만 입력되어 정상적으로 처리되고 문제가 풀리는 것을 알 수 있다.  

## 참고 

### substr( string, start [, length ] )
+ string : 추출의 대상이 되는 문자열입니다.  
+ start : 추출을 시작하는 위치입니다.  
+ length : 추출할 문자의 개수입니다. 값이 없으면 문자열의 끝까지 추출합니다. 음수일 때는 위치를 뜻하고, 그 위치 앞까지의 문자를 추출합니다.


